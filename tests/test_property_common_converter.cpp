#include <gtest/gtest.h>
#include <vector>
#include <string>

TEST(PropertyCommonConverterTest, encodeToMcoded7) {
    std::string input = "{\"foo\": [1,2,3,4,5], \"bar\": [6,7,8,9,0]}\n";
    std::vector<uint8_t> inputBytes(input.begin(), input.end());
    
    std::vector<uint8_t> expected = {
        0x7B, 0x22, 0x66, 0x6F, 0x6F, 0x22, 0x3A, 0x20, 0x5B, 0x31, 0x2C, 0x32, 0x2C, 0x33,
        0x2C, 0x34, 0x2C, 0x35, 0x5D, 0x2C, 0x20, 0x22, 0x62, 0x61, 0x72, 0x22, 0x3A, 0x20,
        0x5B, 0x36, 0x2C, 0x37, 0x2C, 0x38, 0x2C, 0x39, 0x2C, 0x30, 0x5D, 0x7D, 0x0A
    };
    
    EXPECT_EQ(expected, inputBytes);
}

TEST(PropertyCommonConverterTest, decodeMcoded7) {
    std::vector<uint8_t> input = {
        0x7B, 0x22, 0x66, 0x6F, 0x6F, 0x22, 0x3A, 0x20, 0x5B, 0x31, 0x2C, 0x32, 0x2C, 0x33,
        0x2C, 0x34, 0x2C, 0x35, 0x5D, 0x2C, 0x20, 0x22, 0x62, 0x61, 0x72, 0x22, 0x3A, 0x20,
        0x5B, 0x36, 0x2C, 0x37, 0x2C, 0x38, 0x2C, 0x39, 0x2C, 0x30, 0x5D, 0x7D, 0x0A
    };
    
    std::string expected = "{\"foo\": [1,2,3,4,5], \"bar\": [6,7,8,9,0]}\n";
    std::vector<uint8_t> expectedBytes(expected.begin(), expected.end());
    
    EXPECT_EQ(expectedBytes, input);
}
